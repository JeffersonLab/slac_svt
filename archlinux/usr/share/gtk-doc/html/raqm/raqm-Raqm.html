<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Raqm: Reference manual</title>
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="Reference manual">
<link rel="up" href="ch01.html" title="Raqm API">
<link rel="prev" href="ch01.html" title="Raqm API">
<link rel="next" href="object-tree.html" title="Object Hierarchy">
<meta name="generator" content="GTK-Doc V1.26.1 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#raqm-Raqm.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="ch01.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="object-tree.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="raqm-Raqm"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="raqm-Raqm.top_of_page"></a>Raqm</span></h2>
<p>Raqm — A library for complex text layout</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="raqm-Raqm.functions"></a><h2>Functions</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="returnvalue">raqm_t</span></a> *
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-create" title="raqm_create ()">raqm_create</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="returnvalue">raqm_t</span></a> *
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-reference" title="raqm_reference ()">raqm_reference</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-destroy" title="raqm_destroy ()">raqm_destroy</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-set-text" title="raqm_set_text ()">raqm_set_text</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-set-text-utf8" title="raqm_set_text_utf8 ()">raqm_set_text_utf8</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-set-par-direction" title="raqm_set_par_direction ()">raqm_set_par_direction</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-set-language" title="raqm_set_language ()">raqm_set_language</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-set-freetype-face" title="raqm_set_freetype_face ()">raqm_set_freetype_face</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-set-freetype-face-range" title="raqm_set_freetype_face_range ()">raqm_set_freetype_face_range</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-set-freetype-load-flags" title="raqm_set_freetype_load_flags ()">raqm_set_freetype_load_flags</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-add-font-feature" title="raqm_add_font_feature ()">raqm_add_font_feature</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-layout" title="raqm_layout ()">raqm_layout</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="raqm-Raqm.html#raqm-glyph-t" title="raqm_glyph_t"><span class="returnvalue">raqm_glyph_t</span></a> *
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-get-glyphs" title="raqm_get_glyphs ()">raqm_get_glyphs</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-index-to-position" title="raqm_index_to_position ()">raqm_index_to_position</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">bool</span>
</td>
<td class="function_name">
<a class="link" href="raqm-Raqm.html#raqm-position-to-index" title="raqm_position_to_index ()">raqm_position_to_index</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="raqm-Raqm.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="name">
<col class="description">
</colgroup>
<tbody>
<tr>
<td class="typedef_keyword">typedef</td>
<td class="function_name"><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t">raqm_t</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="raqm-Raqm.html#raqm-direction-t" title="enum raqm_direction_t">raqm_direction_t</a></td>
</tr>
<tr>
<td class="datatype_keyword"> </td>
<td class="function_name"><a class="link" href="raqm-Raqm.html#raqm-glyph-t" title="raqm_glyph_t">raqm_glyph_t</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="raqm-Raqm.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;raqm.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="raqm-Raqm.description"></a><h2>Description</h2>
<p>Raqm is a light weight text layout library with strong emphasis on
supporting languages and writing systems that require complex text layout.</p>
<p>The main object in Raqm API is <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>, it stores all the states of the
input text, its properties, and the output of the layout process.</p>
<p>To start, you create a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> object, add text and font(s) to it, run the
layout process, and finally query about the output. For example:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="preproc">#include</span><span class="normal"> </span><span class="string">"raqm.h"</span>

<span class="type">int</span>
<span class="function">main</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="normal"> argc</span><span class="symbol">,</span><span class="normal"> </span><span class="type">char</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">argv</span><span class="symbol">[])</span>
<span class="cbracket">{</span>
<span class="normal">    </span><span class="keyword">const</span><span class="normal"> </span><span class="type">char</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">fontfile</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">const</span><span class="normal"> </span><span class="type">char</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">text</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">const</span><span class="normal"> </span><span class="type">char</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">direction</span><span class="symbol">;</span>
<span class="normal">    </span><span class="type">int</span><span class="normal"> i</span><span class="symbol">;</span>
<span class="normal">    </span><span class="type">int</span><span class="normal"> ret </span><span class="symbol">=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">;</span>

<span class="normal">    </span><span class="usertype">raqm_t</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">rq </span><span class="symbol">=</span><span class="normal"> NULL</span><span class="symbol">;</span>
<span class="normal">    </span><span class="usertype">raqm_glyph_t</span><span class="normal"> </span><span class="symbol">*</span><span class="normal">glyphs </span><span class="symbol">=</span><span class="normal"> NULL</span><span class="symbol">;</span>
<span class="normal">    </span><span class="usertype">size_t</span><span class="normal"> count</span><span class="symbol">;</span>
<span class="normal">    </span><span class="usertype">raqm_direction_t</span><span class="normal"> dir</span><span class="symbol">;</span>

<span class="normal">    </span><span class="usertype">FT_Library</span><span class="normal"> ft_library </span><span class="symbol">=</span><span class="normal"> NULL</span><span class="symbol">;</span>
<span class="normal">    </span><span class="usertype">FT_Face</span><span class="normal"> face </span><span class="symbol">=</span><span class="normal"> NULL</span><span class="symbol">;</span>
<span class="normal">    </span><span class="usertype">FT_Error</span><span class="normal"> ft_error</span><span class="symbol">;</span>


<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">argc </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">4</span><span class="symbol">)</span>
<span class="normal">    </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">printf</span><span class="normal"> </span><span class="symbol">(</span><span class="string">"Usage:</span><span class="specialchar">\n</span><span class="string"> FONT_FILE TEXT DIRECTION</span><span class="specialchar">\n</span><span class="string">"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">return</span><span class="normal"> </span><span class="number">1</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    fontfile </span><span class="symbol">=</span><span class="normal">  argv</span><span class="symbol">[</span><span class="number">1</span><span class="symbol">];</span>
<span class="normal">    text </span><span class="symbol">=</span><span class="normal"> argv</span><span class="symbol">[</span><span class="number">2</span><span class="symbol">];</span>
<span class="normal">    direction </span><span class="symbol">=</span><span class="normal"> argv</span><span class="symbol">[</span><span class="number">3</span><span class="symbol">];</span>

<span class="normal">    ft_error </span><span class="symbol">=</span><span class="normal"> </span><span class="function">FT_Init_FreeType</span><span class="normal"> </span><span class="symbol">(&amp;</span><span class="normal">ft_library</span><span class="symbol">);</span>
<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ft_error</span><span class="symbol">)</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>
<span class="normal">    ft_error </span><span class="symbol">=</span><span class="normal"> </span><span class="function">FT_New_Face</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ft_library</span><span class="symbol">,</span><span class="normal"> fontfile</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">&amp;</span><span class="normal">face</span><span class="symbol">);</span>
<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ft_error</span><span class="symbol">)</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>
<span class="normal">    ft_error </span><span class="symbol">=</span><span class="normal"> </span><span class="function">FT_Set_Char_Size</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">face</span><span class="symbol">,</span><span class="normal"> face</span><span class="symbol">-&gt;</span><span class="normal">units_per_EM</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">);</span>
<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ft_error</span><span class="symbol">)</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>

<span class="normal">    dir </span><span class="symbol">=</span><span class="normal"> <a href="raqm-Raqm.html#RAQM-DIRECTION-DEFAULT:CAPS">RAQM_DIRECTION_DEFAULT</a></span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="function">strcmp</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">direction</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"-rtl"</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span>
<span class="normal">      dir </span><span class="symbol">=</span><span class="normal"> <a href="raqm-Raqm.html#RAQM-DIRECTION-RTL:CAPS">RAQM_DIRECTION_RTL</a></span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">else</span><span class="normal"> </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="function">strcmp</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">direction</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"-ltr"</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span>
<span class="normal">      dir </span><span class="symbol">=</span><span class="normal"> <a href="raqm-Raqm.html#RAQM-DIRECTION-LTR:CAPS">RAQM_DIRECTION_LTR</a></span><span class="symbol">;</span>

<span class="normal">    rq </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="raqm-Raqm.html#raqm-create">raqm_create</a></span><span class="normal"> </span><span class="symbol">();</span>
<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">rq </span><span class="symbol">==</span><span class="normal"> NULL</span><span class="symbol">)</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(!</span><span class="function"><a href="raqm-Raqm.html#raqm-set-text-utf8">raqm_set_text_utf8</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">rq</span><span class="symbol">,</span><span class="normal"> text</span><span class="symbol">,</span><span class="normal"> </span><span class="function">strlen</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">)))</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(!</span><span class="function"><a href="raqm-Raqm.html#raqm-set-freetype-face">raqm_set_freetype_face</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">rq</span><span class="symbol">,</span><span class="normal"> face</span><span class="symbol">))</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(!</span><span class="function"><a href="raqm-Raqm.html#raqm-set-par-direction">raqm_set_par_direction</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">rq</span><span class="symbol">,</span><span class="normal"> dir</span><span class="symbol">))</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(!</span><span class="function"><a href="raqm-Raqm.html#raqm-layout">raqm_layout</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">rq</span><span class="symbol">))</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>

<span class="normal">    glyphs </span><span class="symbol">=</span><span class="normal"> </span><span class="function"><a href="raqm-Raqm.html#raqm-get-glyphs">raqm_get_glyphs</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">rq</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">&amp;</span><span class="normal">count</span><span class="symbol">);</span>
<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">glyphs </span><span class="symbol">==</span><span class="normal"> NULL</span><span class="symbol">)</span>
<span class="normal">        </span><span class="keyword">goto</span><span class="normal"> final</span><span class="symbol">;</span>

<span class="normal">    </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">i </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span><span class="normal"> i </span><span class="symbol">&lt;</span><span class="normal"> count</span><span class="symbol">;</span><span class="normal"> i</span><span class="symbol">++)</span>
<span class="normal">    </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">printf</span><span class="normal"> </span><span class="symbol">(</span><span class="string">"%d %d %d %d %d %d</span><span class="specialchar">\n</span><span class="string">"</span><span class="symbol">,</span>
<span class="normal">               glyphs</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">].</span><span class="normal">index</span><span class="symbol">,</span>
<span class="normal">               glyphs</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">].</span><span class="normal">x_offset</span><span class="symbol">,</span>
<span class="normal">               glyphs</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">].</span><span class="normal">y_offset</span><span class="symbol">,</span>
<span class="normal">               glyphs</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">].</span><span class="normal">x_advance</span><span class="symbol">,</span>
<span class="normal">               glyphs</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">].</span><span class="normal">y_advance</span><span class="symbol">,</span>
<span class="normal">               glyphs</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">].</span><span class="normal">cluster</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    ret </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span>

<span class="label">final:</span>
<span class="normal">    </span><span class="function"><a href="raqm-Raqm.html#raqm-destroy">raqm_destroy</a></span><span class="normal"> </span><span class="symbol">(</span><span class="normal">rq</span><span class="symbol">);</span>
<span class="normal">    </span><span class="function">FT_Done_Face</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">face</span><span class="symbol">);</span>
<span class="normal">    </span><span class="function">FT_Done_FreeType</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ft_library</span><span class="symbol">);</span>

<span class="normal">    </span><span class="keyword">return</span><span class="normal"> ret</span><span class="symbol">;</span>
<span class="cbracket">}</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p>
To compile this example:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="normal">cc </span><span class="symbol">-</span><span class="normal">o </span><span class="usertype">test</span><span class="normal"> test</span><span class="symbol">.</span><span class="normal">c `pkg</span><span class="symbol">-</span><span class="normal">config </span><span class="symbol">--</span><span class="normal">libs </span><span class="symbol">--</span><span class="usertype">cflags</span><span class="normal"> raqm`</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p></p>
</div>
<div class="refsect1">
<a name="raqm-Raqm.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="raqm-create"></a><h3>raqm_create ()</h3>
<pre class="programlisting"><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="returnvalue">raqm_t</span></a> *
raqm_create (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Creates a new <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> with all its internal states initialized to their
defaults.</p>
<div class="refsect3">
<a name="raqm-create.returns"></a><h4>Returns</h4>
<p>A newly allocated <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> with a reference count of 1. The initial reference
count should be released with <a class="link" href="raqm-Raqm.html#raqm-destroy" title="raqm_destroy ()"><code class="function">raqm_destroy()</code></a> when you are done using the
<a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>. Returns <code class="literal">NULL</code> in case of error.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-reference"></a><h3>raqm_reference ()</h3>
<pre class="programlisting"><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="returnvalue">raqm_t</span></a> *
raqm_reference (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>);</pre>
<p>Increases the reference count on <em class="parameter"><code>rq</code></em>
 by one. This prevents <em class="parameter"><code>rq</code></em>
 from being
destroyed until a matching call to <a class="link" href="raqm-Raqm.html#raqm-destroy" title="raqm_destroy ()"><code class="function">raqm_destroy()</code></a> is made.</p>
<div class="refsect3">
<a name="raqm-reference.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-reference.returns"></a><h4>Returns</h4>
<p>The referenced <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-destroy"></a><h3>raqm_destroy ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
raqm_destroy (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>);</pre>
<p>Decreases the reference count on <em class="parameter"><code>rq</code></em>
 by one. If the result is zero, then <em class="parameter"><code>rq</code></em>

and all associated resources are freed.
See <code class="function">cairo_reference()</code>.</p>
<div class="refsect3">
<a name="raqm-destroy.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-set-text"></a><h3>raqm_set_text ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_set_text (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
               <em class="parameter"><code>const <span class="type">uint32_t</span> *text</code></em>,
               <em class="parameter"><code><span class="type">size_t</span> len</code></em>);</pre>
<p>Adds <em class="parameter"><code>text</code></em>
 to <em class="parameter"><code>rq</code></em>
 to be used for layout. It must be a valid UTF-32 text, any
invalid character will be replaced with U+FFFD. The text should typically
represent a full paragraph, since doing the layout of chunks of text
separately can give improper output.</p>
<div class="refsect3">
<a name="raqm-set-text.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>text</p></td>
<td class="parameter_description"><p>a UTF-32 encoded text string.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>len</p></td>
<td class="parameter_description"><p>the length of <em class="parameter"><code>text</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-set-text.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if no errors happened, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-set-text-utf8"></a><h3>raqm_set_text_utf8 ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_set_text_utf8 (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                    <em class="parameter"><code>const <span class="type">char</span> *text</code></em>,
                    <em class="parameter"><code><span class="type">size_t</span> len</code></em>);</pre>
<p>Same as <a class="link" href="raqm-Raqm.html#raqm-set-text" title="raqm_set_text ()"><code class="function">raqm_set_text()</code></a>, but for text encoded in UTF-8 encoding.</p>
<div class="refsect3">
<a name="raqm-set-text-utf8.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>text</p></td>
<td class="parameter_description"><p>a UTF-8 encoded text string.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>len</p></td>
<td class="parameter_description"><p>the length of <em class="parameter"><code>text</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-set-text-utf8.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if no errors happened, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-set-par-direction"></a><h3>raqm_set_par_direction ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_set_par_direction (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                        <em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-direction-t" title="enum raqm_direction_t"><span class="type">raqm_direction_t</span></a> dir</code></em>);</pre>
<p>Sets the paragraph direction, also known as block direction in CSS. For
horizontal text, this controls the overall direction in the Unicode
Bidirectional Algorithm, so when the text is mainly right-to-left (with or
without some left-to-right) text, then the base direction should be set to
<a class="link" href="raqm-Raqm.html#RAQM-DIRECTION-RTL:CAPS"><span class="type">RAQM_DIRECTION_RTL</span></a> and vice versa.</p>
<p>The default is <a class="link" href="raqm-Raqm.html#RAQM-DIRECTION-DEFAULT:CAPS"><span class="type">RAQM_DIRECTION_DEFAULT</span></a>, which determines the paragraph
direction based on the first character with strong bidi type (see <a class="ulink" href="http://unicode.org/reports/tr9/#P2" target="_top">rule
P2</a> in Unicode Bidirectional Algorithm),
which can be good enough for many cases but has problems when a mainly
right-to-left paragraph starts with a left-to-right character and vice versa
as the detected paragraph direction will be the wrong one, or when text does
not contain any characters with string bidi types (e.g. only punctuation or
numbers) as this will default to left-to-right paragraph direction.</p>
<p>For vertical, top-to-bottom text, <a class="link" href="raqm-Raqm.html#RAQM-DIRECTION-TTB:CAPS"><span class="type">RAQM_DIRECTION_TTB</span></a> should be used. Raqm,
however, provides limited vertical text support and does not handle rotated
horizontal text in vertical text, instead everything is treated as vertical
text.</p>
<div class="refsect3">
<a name="raqm-set-par-direction.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>dir</p></td>
<td class="parameter_description"><p>the direction of the paragraph.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-set-par-direction.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if no errors happened, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-set-language"></a><h3>raqm_set_language ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_set_language (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                   <em class="parameter"><code>const <span class="type">char</span> *lang</code></em>,
                   <em class="parameter"><code><span class="type">size_t</span> start</code></em>,
                   <em class="parameter"><code><span class="type">size_t</span> len</code></em>);</pre>
<p>Sets a <a class="ulink" href="https://www.w3.org/International/articles/language-tags/" target="_top">BCP47 language
code</a> to be used
for <em class="parameter"><code>len</code></em>
-number of characters staring at <em class="parameter"><code>start</code></em>
.  The <em class="parameter"><code>start</code></em>
 and <em class="parameter"><code>len</code></em>
 are
input string array indices (i.e. counting bytes in UTF-8 and scaler values
in UTF-32).</p>
<p>This method can be used repeatedly to set different languages for different
parts of the text.</p>
<div class="refsect3">
<a name="raqm-set-language.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>lang</p></td>
<td class="parameter_description"><p>a BCP47 language code.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>start</p></td>
<td class="parameter_description"><p>index of first character that should use <em class="parameter"><code>face</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>len</p></td>
<td class="parameter_description"><p>number of characters using <em class="parameter"><code>face</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-set-language.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if no errors happened, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-2.html#api-index-0.2">0.2</a></p>
<p class="stability">Stability Level: <acronym title="Unstable interfaces are experimental or transitional. They are typically used to
give outside developers early access to new or rapidly changing technology, or
to provide an interim solution to a problem where a more general solution is
anticipated. No claims are made about either source or binary compatibility from
one minor release to the next.

The Unstable interface level is a warning that these interfaces are  subject to
change without warning and should not be used in unbundled products.

Given such caveats, customer impact need not be a factor when considering
incompatible changes to an Unstable interface in a major or minor release.
Nonetheless, when such changes are introduced, the changes should still be
mentioned in the release notes for the affected release.
"><span class="acronym">Unstable</span></acronym></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-set-freetype-face"></a><h3>raqm_set_freetype_face ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_set_freetype_face (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                        <em class="parameter"><code><span class="type">FT_Face</span> face</code></em>);</pre>
<p>Sets an <span class="type">FT_Face</span> to be used for all characters in <em class="parameter"><code>rq</code></em>
.</p>
<p>See also <a class="link" href="raqm-Raqm.html#raqm-set-freetype-face-range" title="raqm_set_freetype_face_range ()"><code class="function">raqm_set_freetype_face_range()</code></a>.</p>
<div class="refsect3">
<a name="raqm-set-freetype-face.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>face</p></td>
<td class="parameter_description"><p>an <span class="type">FT_Face</span>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-set-freetype-face.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if no errors happened, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-set-freetype-face-range"></a><h3>raqm_set_freetype_face_range ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_set_freetype_face_range (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                              <em class="parameter"><code><span class="type">FT_Face</span> face</code></em>,
                              <em class="parameter"><code><span class="type">size_t</span> start</code></em>,
                              <em class="parameter"><code><span class="type">size_t</span> len</code></em>);</pre>
<p>Sets an <span class="type">FT_Face</span> to be used for <em class="parameter"><code>len</code></em>
-number of characters staring at <em class="parameter"><code>start</code></em>
.
The <em class="parameter"><code>start</code></em>
 and <em class="parameter"><code>len</code></em>
 are input string array indices (i.e. counting bytes in
UTF-8 and scaler values in UTF-32).</p>
<p>This method can be used repeatedly to set different faces for different
parts of the text. It is the responsibility of the client to make sure that
face ranges cover the whole text.</p>
<p>See also <a class="link" href="raqm-Raqm.html#raqm-set-freetype-face" title="raqm_set_freetype_face ()"><code class="function">raqm_set_freetype_face()</code></a>.</p>
<div class="refsect3">
<a name="raqm-set-freetype-face-range.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>face</p></td>
<td class="parameter_description"><p>an <span class="type">FT_Face</span>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>start</p></td>
<td class="parameter_description"><p>index of first character that should use <em class="parameter"><code>face</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>len</p></td>
<td class="parameter_description"><p>number of characters using <em class="parameter"><code>face</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-set-freetype-face-range.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if no errors happened, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-set-freetype-load-flags"></a><h3>raqm_set_freetype_load_flags ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_set_freetype_load_flags (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                              <em class="parameter"><code><span class="type">int</span> flags</code></em>);</pre>
<p>Sets the load flags passed to FreeType when loading glyphs, should be the
same flags used by the client when rendering FreeType glyphs.</p>
<p>This requires version of HarfBuzz that has <a href="../harfbuzz/harfbuzz-hb-ft.html#hb-ft-font-set-load-flags"><code class="function">hb_ft_font_set_load_flags()</code></a>, for
older version the flags will be ignored.</p>
<div class="refsect3">
<a name="raqm-set-freetype-load-flags.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>flags</p></td>
<td class="parameter_description"><p>FreeType load flags.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-set-freetype-load-flags.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if no errors happened, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-3.html#api-index-0.3">0.3</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-add-font-feature"></a><h3>raqm_add_font_feature ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_add_font_feature (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                       <em class="parameter"><code>const <span class="type">char</span> *feature</code></em>,
                       <em class="parameter"><code><span class="type">int</span> len</code></em>);</pre>
<p>Adds a font feature to be used by the <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> during text layout. This is
usually used to turn on optional font features that are not enabled by
default, for example <code class="literal">dlig</code> or <code class="literal">ss01</code>, but can be also used to turn off
default font features.</p>
<p><em class="parameter"><code>feature</code></em>
 is string representing a single font feature, in the syntax
understood by <a href="../harfbuzz/harfbuzz-Shaping.html#hb-feature-from-string"><code class="function">hb_feature_from_string()</code></a>.</p>
<p>This function can be called repeatedly, new features will be appended to the
end of the features list and can potentially override previous features.</p>
<div class="refsect3">
<a name="raqm-add-font-feature.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>feature</p></td>
<td class="parameter_description"><p>a font feature string. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>len</p></td>
<td class="parameter_description"><p>length of <em class="parameter"><code>feature</code></em>
, -1 for <code class="literal">NULL</code>-terminated.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-add-font-feature.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if parsing <em class="parameter"><code>feature</code></em>
succeeded, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-layout"></a><h3>raqm_layout ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_layout (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>);</pre>
<p>Run the text layout process on <em class="parameter"><code>rq</code></em>
. This is the main Raqm function where the
Unicode Bidirectional Text algorithm will be applied to the text in <em class="parameter"><code>rq</code></em>
,
text shaping, and any other part of the layout process.</p>
<div class="refsect3">
<a name="raqm-layout.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-layout.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if the layout process was successful, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-get-glyphs"></a><h3>raqm_get_glyphs ()</h3>
<pre class="programlisting"><a class="link" href="raqm-Raqm.html#raqm-glyph-t" title="raqm_glyph_t"><span class="returnvalue">raqm_glyph_t</span></a> *
raqm_get_glyphs (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                 <em class="parameter"><code><span class="type">size_t</span> *length</code></em>);</pre>
<p>Gets the final result of Raqm layout process, an array of <a class="link" href="raqm-Raqm.html#raqm-glyph-t" title="raqm_glyph_t"><span class="type">raqm_glyph_t</span></a>
containing the glyph indices in the font, their positions and other possible
information.</p>
<div class="refsect3">
<a name="raqm-get-glyphs.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>length</p></td>
<td class="parameter_description"><p>output array length. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-get-glyphs.returns"></a><h4>Returns</h4>
<p>An array of <a class="link" href="raqm-Raqm.html#raqm-glyph-t" title="raqm_glyph_t"><span class="type">raqm_glyph_t</span></a>, or <code class="literal">NULL</code> in case of error. This is owned by <em class="parameter"><code>rq</code></em>
and must not be freed. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-index-to-position"></a><h3>raqm_index_to_position ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_index_to_position (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                        <em class="parameter"><code><span class="type">size_t</span> *index</code></em>,
                        <em class="parameter"><code><span class="type">int</span> *x</code></em>,
                        <em class="parameter"><code><span class="type">int</span> *y</code></em>);</pre>
<p>Calculates the cursor position after the character at <em class="parameter"><code>index</code></em>
. If the character
is right-to-left, then the cursor will be at the left of it, whereas if the
character is left-to-right, then the cursor will be at the right of it.</p>
<div class="refsect3">
<a name="raqm-index-to-position.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>index</p></td>
<td class="parameter_description"><p>character index. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for input and for returning results. Default is transfer full."><span class="acronym">inout</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>x</p></td>
<td class="parameter_description"><p>output x position. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>y</p></td>
<td class="parameter_description"><p>output y position. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-index-to-position.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if the process was successful, <code class="literal">false</code> otherwise.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-2.html#api-index-0.2">0.2</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-position-to-index"></a><h3>raqm_position_to_index ()</h3>
<pre class="programlisting"><span class="returnvalue">bool</span>
raqm_position_to_index (<em class="parameter"><code><a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a> *rq</code></em>,
                        <em class="parameter"><code><span class="type">int</span> x</code></em>,
                        <em class="parameter"><code><span class="type">int</span> y</code></em>,
                        <em class="parameter"><code><span class="type">size_t</span> *index</code></em>);</pre>
<p>Returns the <em class="parameter"><code>index</code></em>
 of the character at <em class="parameter"><code>x</code></em>
 and <em class="parameter"><code>y</code></em>
 position within text.
If the position is outside the text, the last character is chosen as
<em class="parameter"><code>index</code></em>
.</p>
<div class="refsect3">
<a name="raqm-position-to-index.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>rq</p></td>
<td class="parameter_description"><p>a <a class="link" href="raqm-Raqm.html#raqm-t" title="raqm_t"><span class="type">raqm_t</span></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>x</p></td>
<td class="parameter_description"><p>x position.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>y</p></td>
<td class="parameter_description"><p>y position.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>index</p></td>
<td class="parameter_description"><p>output character index. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="raqm-position-to-index.returns"></a><h4>Returns</h4>
<p><code class="literal">true</code> if the process was successful, <code class="literal">false</code> in case of error.</p>
</div>
<p class="since">Since: <a class="link" href="api-index-0-2.html#api-index-0.2">0.2</a></p>
</div>
</div>
<div class="refsect1">
<a name="raqm-Raqm.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="raqm-t"></a><h3>raqm_t</h3>
<p>This is the main object holding all state of the currently processed text as
well as its output.</p>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-direction-t"></a><h3>enum raqm_direction_t</h3>
<p>Base paragraph direction, see <a class="link" href="raqm-Raqm.html#raqm-set-par-direction" title="raqm_set_par_direction ()"><code class="function">raqm_set_par_direction()</code></a>.</p>
<div class="refsect3">
<a name="raqm-direction-t.members"></a><h4>Members</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="300px" class="enum_members_name">
<col class="enum_members_description">
<col width="200px" class="enum_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="RAQM-DIRECTION-DEFAULT:CAPS"></a>RAQM_DIRECTION_DEFAULT</p></td>
<td class="enum_member_description">
<p>Detect paragraph direction automatically.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="RAQM-DIRECTION-RTL:CAPS"></a>RAQM_DIRECTION_RTL</p></td>
<td class="enum_member_description">
<p>Paragraph is mainly right-to-left text.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="RAQM-DIRECTION-LTR:CAPS"></a>RAQM_DIRECTION_LTR</p></td>
<td class="enum_member_description">
<p>Paragraph is mainly left-to-right text.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="RAQM-DIRECTION-TTB:CAPS"></a>RAQM_DIRECTION_TTB</p></td>
<td class="enum_member_description">
<p>Paragraph is mainly vertical top-to-bottom text.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="api-index-0-1.html#api-index-0.1">0.1</a></p>
</div>
<hr>
<div class="refsect2">
<a name="raqm-glyph-t"></a><h3>raqm_glyph_t</h3>
<pre class="programlisting">typedef struct {
    unsigned int index;
    int x_advance;
    int y_advance;
    int x_offset;
    int y_offset;
    uint32_t cluster;
    FT_Face ftface;
} raqm_glyph_t;
</pre>
<p>The structure that holds information about output glyphs, returned from
<a class="link" href="raqm-Raqm.html#raqm-get-glyphs" title="raqm_get_glyphs ()"><code class="function">raqm_get_glyphs()</code></a>.</p>
<div class="refsect3">
<a name="raqm-glyph-t.members"></a><h4>Members</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="struct_member_name"><p>unsigned <span class="type">int</span> <em class="structfield"><code><a name="raqm-glyph-t.index"></a>index</code></em>;</p></td>
<td class="struct_member_description"><p>the index of the glyph in the font file.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><span class="type">int</span> <em class="structfield"><code><a name="raqm-glyph-t.x-advance"></a>x_advance</code></em>;</p></td>
<td class="struct_member_description"><p>the glyph advance width in horizontal text.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><span class="type">int</span> <em class="structfield"><code><a name="raqm-glyph-t.y-advance"></a>y_advance</code></em>;</p></td>
<td class="struct_member_description"><p>the glyph advance width in vertical text.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><span class="type">int</span> <em class="structfield"><code><a name="raqm-glyph-t.x-offset"></a>x_offset</code></em>;</p></td>
<td class="struct_member_description"><p>the horizontal movement of the glyph from the current point.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><span class="type">int</span> <em class="structfield"><code><a name="raqm-glyph-t.y-offset"></a>y_offset</code></em>;</p></td>
<td class="struct_member_description"><p>the vertical movement of the glyph from the current point.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><span class="type">uint32_t</span> <em class="structfield"><code><a name="raqm-glyph-t.cluster"></a>cluster</code></em>;</p></td>
<td class="struct_member_description"><p>the index of original character in input text.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><span class="type">FT_Face</span> <em class="structfield"><code><a name="raqm-glyph-t.ftface"></a>ftface</code></em>;</p></td>
<td class="struct_member_description"><p>the <em class="parameter"><code>FT_Face</code></em>
of the glyph.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.26.1</div>
</body>
</html>